<html>
<head>
<title>
CSocket - Socket Library
</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>

<body bgcolor="#ffffff"> 
<table width="100%">
  <tr>
    <td width="40%" align="left" valign="center">
      <a href="http://carrierlabs.com/projects/sockets">
      CSocket project page
      </a>
    </td>
    <td>
      <a href="FAQ">FAQ</a>
    </td>
    <td width="40%" align="right" valign="center">
      <a href="http://csocket.carrierlabs.com">CSocket home page</a>
    </td>
  </tr>
</table>

<hr>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>Writing Test Plug-in</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
Creating a test plug-in is really simple:<ul>
<li>make your project a dynamic library (with VC++, choose Win32 Dynamic Library in the project wizard), and link against the dynamic library version of CppUnit (cppunit*_dll.lib for VC++).</li><li>in a cpp file, include TestPlugIn.h, and use the macro CPPUNIT_PLUGIN_IMPLEMENT() to declare the test plug-in.</li><li>That's it, you're done! All the tests registered using the TestFactoryRegistry, CPPUNIT_TEST_SUITE_NAMED_REGISTRATION, or CPPUNIT_TEST_SUITE_REGISTRATION will be visible to other plug-in and to the DllPlugInRunner.</li></ul>
<p>
Example: <div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;cppunit/include/plugin/TestPlugIn.h&gt;</span>

 CPPUNIT_PLUGIN_IMPLEMENT();
</pre></div><p>
The interface CppUnitTestPlugIn is automatically implemented by the previous macro. You can define your one implementation.<p>
To provide your custom implementation of the plug-in interface, you must:<ul>
<li>create a class that implements the CppUnitTestPlugIn interface</li><li>use CPPUNIT_PLUGIN_EXPORTED_FUNCTION_IMPL() with your class to export the plug-in interface</li><li>implements the 'main' function with CPPUNIT_PLUGIN_IMPLEMENT_MAIN().</li></ul>
<p>
Some of the reason you may want to do this:<ul>
<li>You do not use the TestFactoryRegistry to register your test.</li><li>You want to create a custom listener to use with DllPlugInRunner.</li><li>You want to do initialize some globale resources before running the test (setting up COM for example).</li></ul>
<p>
See CppUnitTestPlugIn for further detail on how to do this.<p>
Creating your own test plug-in with VC++:<ul>
<li>Create a new "Win32 Dynamic Library" project, choose the empty template</li><li>For the Debug Configuration, add cppunitd_dll.lib to 'Project Settings/Link/Object/Libariries modules', and for the Release Configuration, add cppunit_dll.lib.</li><li>For All Configuration, in 'C++/Preprocessor/Preprocessors definitions', add the symbol 'CPPUNIT_DLL' at the end of the line (it means that you are linking against cppunit dll).</li><li>Create a 'main' file that contains: <div class="fragment"><pre class="fragment">#include &lt;cppunit/plugin/TestPlugIn.h&gt;

CPPUNIT_PLUGIN_IMPLEMENT();</pre></div></li><li>Add your tests</li><li>You're done !</li></ul>
<p>
See examples/simple/simple_plugin.dsp for an example.<p>
Notes to VC++ users:<ul>
<li>you can run a post-build check on the plug-in. Add the following line to your post-build tab: "DllPlugInTesterd_dll.exe $(TargetPath)". DllPlugInTesterd_dll.exe need to be some place were it can be found (path, ...), or you need to indicate the correct path.  is the filename of your plug-in.</li><li>you can debug your DLL, set the executable for debug session to the plug-in runner, and the name of the DLL in the program arguments ( won't work this time).</li></ul>
<p>
How does it works ?<p>
When CppUnit is linked as a DLL, the singleton used for the TestFactoryRegistry is the same for the plug-in runner (also linked against CppUnit DLL). This means that the tests registered with the macros (at static initialization) are registered in the same registry. As soon as a DLL is loaded by the PlugInManager, the DLL static variable are constructed and the test registered to the TestFactoryRegistry.<p>
After loading the DLL, the PlugInManager look-up a specific function exported by the DLL. That function returns a pointer on the plug-in interface, which is later used by the PlugInManager.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__CreatingTestSuite.html">Creating TestSuite</a>.</dd></dl>
<hr>
<table width="100%">
  <tr>
    <td width="10%" align="left" valign="center">
      <a href="http://carrierlabs.com"> 
      <img
<!--      src="http://sourceforge.net/sflogo.php?group_id=11795" -->
      width="88" height="31" border="0" alt="SourceForge Logo"></a>
    </td>
    <td width="20%" align="left" valign="center">
      hosts this site.
    </td>
    <td>
    </td>
    <td align="right" valign="center">
      Send comments to:<br>
      <a href="mailto:mark@carrierlabs.com">CarrierLabs Developers</a>
    </td>
  </tr>
</table>

</body> 
</html>
